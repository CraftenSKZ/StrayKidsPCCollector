<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stray Kids Album & POB Tracker</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
<h1>Stray Kids Album & POB Tracker</h1>

<div class="panel" style="font-size:0.9em;color:#ccc">
  Your collection is saved locally in your browser. Switching devices, browsers, or clearing site data will reset your checklist.
  Use <b>Export</b> to back up your collection.
</div>

<div class="panel controls">
  <button id="exportBtn">Export</button>
  <label style="cursor:pointer">Import
    <input type="file" accept=".json" hidden onchange="importData(event)">
  </label>
  <span id="backupStatus" style="margin-left:8px;color:#aaa"></span>
</div>

<div class="panel tabs">
  <button data-category="korean_albums" onclick="setCategory('korean_albums')" class="active">
    Korean Albums
  </button>
  <button data-category="japanese_albums" onclick="setCategory('japanese_albums')">
    Japanese Albums
  </button>
  <button data-category="korean_pob" onclick="setCategory('korean_pob')">
    Korean POB
  </button>
  <button data-category="japanese_pob" onclick="setCategory('japanese_pob')">
    Japanese POB
  </button>
</div>

<div class="panel controls">
  <input id="search" placeholder="Search" oninput="render()">
  <select id="ownedFilter" onchange="render()">
    <option value="all">All</option>
    <option value="owned">Owned</option>
    <option value="unowned">Unowned</option>
  </select>
</div>

<div class="panel members" id="memberFilters"></div>
<div class="progress" id="progress"></div>

<!--Expand/Collapse Albums Toggle, and List View/Grid View buttons-->
<button id="toggleAlbumsBtn" onclick="toggleAllAlbums()"> Collapse All </button>
<button onclick="setViewMode('list')">List View</button>
<button onclick="setViewMode('grid')">Grid View</button>
<button id="exportGridBtn">Export Grid as Image</button>

<table>
<thead>
  <tr>
<th id="th-collected" tabindex="0" role="button" onclick="setSort('collected')">
  Collected
</th>
<th id="th-name" tabindex="0" role="button" onclick="setSort('name')">
  Name
</th>
<th id="th-member" tabindex="0" role="button" onclick="setSort('member')">
  Member
</th>
<th>Photocard</th>
  </tr>
</thead>

<tbody id="list"></tbody>
</table>
<div id="gridView" class="grid-view"></div>
<div class="card-list" id="cardList"></div>


<!-- Export library -->
<script src="js/vendor/html-to-image.min.js"></script>

<!-- Your app -->
<script src="js/app.js" defer></script>

<script>
// Failsafe binding for Export button on GitHub Pages
document.addEventListener('DOMContentLoaded', () => {
  const btn = document.getElementById('exportBtn');
  if (btn && typeof window.exportData === 'function') {
    btn.addEventListener('click', window.exportData);
  }
});
</script>

</body>
</html>
